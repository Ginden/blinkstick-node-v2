<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@ginden/blinkstick-v2</title><meta name="description" content="Documentation for @ginden/blinkstick-v2"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@ginden/blinkstick-v2</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@ginden/blinkstick-v2</h1></div><div class="tsd-panel tsd-typography"><h1 id="blinkstick-v2--modern-typescript-sdk-for-blinkstick-leds" class="tsd-anchor-link">BlinkStick v2 ‚Äì modern TypeScript SDK for BlinkStick LEDs<a href="#blinkstick-v2--modern-typescript-sdk-for-blinkstick-leds" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><blockquote>
<p>Control your BlinkStick devices from Node.js with a <strong>TypeScript-first, Promise-powered</strong> API and a powerful animation engine.</p>
</blockquote>
<h2 id="why-choose-this-fork" class="tsd-anchor-link">Why choose this fork?<a href="#why-choose-this-fork" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>‚Ä¢ <strong>Modern development stack</strong> ‚Äì written in TypeScript, ships with type definitions, uses modern JS features.
‚Ä¢ <strong>Promises &amp; <code>async</code>/<code>await</code> everywhere</strong> ‚Äì no legacy callbacks.<br>
‚Ä¢ <strong>Rich animation toolkit</strong> ‚Äì create complex, FPS-safe animations with <code>Animation</code>, <code>AnimationBuilder</code> and helpers.<br>
‚Ä¢ <strong>Color parsing super-powers</strong> ‚Äì English color names, CSS strings (<code>#ff0000</code>, <code>rgb(255,0,0)</code>), tuples‚Ä¶ even <code>random</code>.<br>
‚Ä¢ <strong>Support for async <code>node-hid</code> APIs</strong> - you can control devices without blocking the event loop.
‚Ä¢ <strong>Works with the official BlinkStick devices</strong>
‚Ä¢ <strong>Node 20+ ready</strong> ‚Äì leverages the latest language and runtime features.</p>
<hr>
<h3 id="quick-install" class="tsd-anchor-link">Quick install<a href="#quick-install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-2">@ginden/blinkstick-v2</span>
</code><button type="button">Copy</button></pre>

<h3 id="quick-example" class="tsd-anchor-link">Quick example<a href="#quick-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">findFirstAsync</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ginden/blinkstick-v2&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Find the first connected device (throws if none are found)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">blinkstick</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">findFirstAsync</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// Make the LED pulse between black ‚Üî purple for ~1 s.</span><br/><span class="hl-5">// The promise resolves with `undefined` once the pulse is finished.</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">pulse</span><span class="hl-1">(</span><span class="hl-2">&#39;purple&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>üëâ <strong>Need more?</strong> Browse the full, searchable API reference at <a href="https://ginden.github.io/blinkstick-node-v2">https://ginden.github.io/blinkstick-node-v2</a>.</p>
<hr>
<!-- TOC start (generated with https://github.com/derlin/bitdowntoc) -->
<ul>
<li><a href="#about-this-project">About this project</a></li>
<li><a href="#changes-from-the-original-library-in-v2">Changes from the original library in v2</a></li>
<li><a href="#big-changes-in-v3">Big changes in v3</a>
<ul>
<li><a href="#known-issues">Known issues</a></li>
</ul>
</li>
<li><a href="#devices">Devices</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#install-blinkstick-node-module">Install BlinkStick node module</a></li>
<li><a href="#getting-started">Getting started</a>
<ul>
<li><a href="#async-recommended">Async (recommended)</a>
<ul>
<li><a href="#easy-mistakes">Easy mistakes</a></li>
</ul>
</li>
<li><a href="#sync-api">Sync API</a>
<ul>
<li><a href="#usage-examples">Usage examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#animation-api">Animation API</a>
<ul>
<li><a href="#generators">Generators</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#known-issues-1">Known issues</a></li>
</ul>
</li>
<li><a href="#missing-information-help-wanted-">Missing information / help wanted üïµÔ∏è‚Äç‚ôÄÔ∏è</a></li>
<li><a href="#permission-problems">Permission problems</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#testing">Testing</a>
<ul>
<li><a href="#manual-test">Manual test</a></li>
<li><a href="#automated-tests">Automated tests</a></li>
<li><a href="#coverage">Coverage</a></li>
</ul>
</li>
<li><a href="#maintainer">Maintainer</a>
<ul>
<li><a href="#original-maintainers">Original maintainers</a></li>
</ul>
</li>
<li><a href="#copyright-and-license">Copyright and License</a></li>
</ul>
<!-- TOC end -->
<!-- TOC --><a name="about-this-project"></a>
<h2 id="about-this-project" class="tsd-anchor-link">About this project<a href="#about-this-project" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project is a <strong>fork</strong> of the original <a href="https://github.com/arvydas/blinkstick-node">blinkstick-node</a> library.<br>
It aims to keep the spirit and feature-set of the original while bringing the code base into the modern TypeScript &amp; Promise world.</p>
<p>BlinkStick Node provides an interface to control BlinkStick devices connected to your computer with Node.js.</p>
<p>What is BlinkStick? It's a tiny USB-controlled RGB LED device. Learn more at <a href="https://www.blinkstick.com">https://www.blinkstick.com</a>.</p>
<!-- TOC --><a name="changes-from-the-original-library-in-v2"></a>
<h2 id="changes-from-the-original-library-in-v2" class="tsd-anchor-link">Changes from the original library in v2<a href="#changes-from-the-original-library-in-v2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>TypeScript</li>
<li>All methods taking callbacks now return Promises</li>
<li>Most animation methods allow <code>AbortSignal</code> (this is only partially supported, your mileage may vary)</li>
<li><s>Many methods return results of setting a feature report on device instead of <code>undefined</code></s> (this one was reverted in v3, as it caused crashes)</li>
<li>Requires Node.js 20.0 or higher</li>
</ul>
<!-- TOC --><a name="big-changes-in-v3"></a>
<h2 id="big-changes-in-v3" class="tsd-anchor-link">Big changes in v3<a href="#big-changes-in-v3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Added support for arbitrary animations
<ul>
<li>This is usable through <code>blinkstick.animation</code> namespace</li>
<li><code>Animation</code> bag class for common animations</li>
<li>Exposed lots of lower-level animation methods</li>
<li>Exposed <code>AnimationBuilder</code> class for building animations</li>
</ul>
</li>
<li>Removed lots of low-level or unnecessary methods</li>
<li>Added subclasses <code>BlinkStickSync</code> and <code>BlinkStickAsync</code> for sync and async APIs and future specialization
<ul>
<li>Future specializations will likely be <code>BlinkStickProSync</code> and <code>BlinkStickProAsync</code>, as the Pro device seems to have lots of unusual features</li>
</ul>
</li>
</ul>
<p><strong>BREAKING CHANGES</strong>:</p>
<ul>
<li>Restored original return types of several methods</li>
<li>No <code>string</code> when dealing with low-level data - use <code>Buffer</code> instead, we assume that you know what you are doing</li>
</ul>
<!-- TOC --><a name="known-issues"></a>
<h3 id="known-issues" class="tsd-anchor-link">Known issues<a href="#known-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>BlinkStick Square</code> devices identify themselves as just <code>BlinkStick</code>. If you try to find base BlinkStick device using <code>findFirst(&quot;BlinkStick&quot;)</code>, it may find a <code>BlinkStick Square</code> instead. This is unlikely to affect users with only one BlinkStick device connected, but if you have both <code>BlinkStick</code> and <code>BlinkStick Square</code>, you may need to do some workarounds to distinguish them. Look at <a href="media/device-descriptions.ts">consts/device-descriptions.ts</a> for detection logic.</li>
</ul>
<!-- TOC --><a name="devices"></a>
<h2 id="devices" class="tsd-anchor-link">Devices<a href="#devices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you want to gift or buy me a BlinkStick device for testing purposes, please email me.</p>
<p><strong>Tested</strong>:</p>
<ul>
<li>BlinkStick Nano</li>
<li>BlinkStick Square</li>
</ul>
<p><strong>Should work</strong>:</p>
<ul>
<li>BlinkStick</li>
<li>BlinkStick Strip</li>
<li>BlinkStick Strip Mini</li>
</ul>
<p><strong>Does not work</strong>:</p>
<ul>
<li>BlinkStick Flex</li>
</ul>
<p><strong>Variable LED count</strong></p>
<p><em>BlinkStick Flex</em> and <em>BlinkStick Pro</em> come with a variable number of LEDs.</p>
<p>This library <em>probably can</em> work with them, but you need to set the number of LEDs in the constructor before using any method.</p>
<pre><code class="ts"><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-4">ledCount</span><span class="hl-1"> = </span><span class="hl-8">42</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p>If you don't set the number of LEDs, the library will assume that you have one LED.</p>
<!-- TOC --><a name="requirements"></a>
<h2 id="requirements" class="tsd-anchor-link">Requirements<a href="#requirements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Node.js, version 20.0 or higher</li>
</ul>
<!-- TOC --><a name="install-blinkstick-node-module"></a>
<h2 id="install-blinkstick-node-module" class="tsd-anchor-link">Install BlinkStick node module<a href="#install-blinkstick-node-module" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Install using npm:</p>
<pre><code class="shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@ginden/blinkstick-v2</span>
</code><button type="button">Copy</button></pre>

<!-- TOC --><a name="getting-started"></a>
<h2 id="getting-started" class="tsd-anchor-link">Getting started<a href="#getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><!-- TOC --><a name="async-recommended"></a>
<h3 id="async-recommended" class="tsd-anchor-link">Async (recommended)<a href="#async-recommended" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Using async APIs is the recommended way. While even sync APIs use Promises, they may block the event loop, which is not a
good practice.</p>
<p>Read docs of <a href="https://github.com/node-hid/node-hid?tab=readme-ov-file#async-vs-sync-api"><code>node-hid</code></a> for more
information.</p>
<p>Note: under the hood the async flavour wraps <code>node-hid</code>‚Äôs <code>HIDAsync</code> class, while the sync API talks to <code>HID</code>.<br>
The async version keeps the Node.js event loop free during USB I/O and is therefore recommended for most real-world applications.</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BlinkStick</span><span class="hl-1">, </span><span class="hl-4">findFirstAsync</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ginden/blinkstick-v2&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">blinkstick</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">findFirstAsync</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<!-- TOC --><a name="easy-mistakes"></a>
<h4 id="easy-mistakes" class="tsd-anchor-link">Easy mistakes<a href="#easy-mistakes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>If you are using Async API, you might accidentally let <code>Blinkstick</code> instance to be garbage-collected. This will emit a
warning, because <code>Blinkstick</code> instance holds reference to C API object. To avoid it, just call <code>close</code> or
use <a href="https://github.com/tc39/proposal-explicit-resource-management">explicit resource management</a>.</p>
<p>Direct construction of <code>BlinkStick</code> is not recommended.</p>
<!-- TOC --><a name="sync-api"></a>
<h3 id="sync-api" class="tsd-anchor-link">Sync API<a href="#sync-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BlinkStick</span><span class="hl-1">, </span><span class="hl-4">findFirst</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ginden/blinkstick-v2&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">blinkstick</span><span class="hl-1"> = </span><span class="hl-0">findFirst</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<!-- TOC --><a name="usage-examples"></a>
<h4 id="usage-examples" class="tsd-anchor-link">Usage examples<a href="#usage-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-5">// Color names are allowed</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">pulse</span><span class="hl-1">(</span><span class="hl-2">&#39;red&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">// &quot;random&quot; is also allowed</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">pulse</span><span class="hl-1">(</span><span class="hl-2">&#39;random&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">// RGB values are allowed</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">pulse</span><span class="hl-1">(</span><span class="hl-8">100</span><span class="hl-1">, </span><span class="hl-8">0</span><span class="hl-1">, </span><span class="hl-8">0</span><span class="hl-1">);</span><br/><span class="hl-5">// RGB values as hex string are allowed</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">pulse</span><span class="hl-1">(</span><span class="hl-2">&#39;#ff0000&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">// RGB values as hex string are allowed</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">pulse</span><span class="hl-1">(</span><span class="hl-2">&#39;ff0000&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">// Well, even rgb(255, 0, 0) is allowed</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">pulse</span><span class="hl-1">(</span><span class="hl-2">&#39;rgb(255, 0, 0)&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">setColor</span><span class="hl-1">(</span><span class="hl-2">&#39;red&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Will work only if you have at least 2 LEDs</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">led</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">).</span><span class="hl-0">setColor</span><span class="hl-1">(</span><span class="hl-2">&#39;green&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">led</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">).</span><span class="hl-0">setColor</span><span class="hl-1">(</span><span class="hl-2">&#39;blue&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Set color of all LEDs</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-0">leds</span><span class="hl-1">().</span><span class="hl-0">setColor</span><span class="hl-1">(</span><span class="hl-2">&#39;yellow&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<!-- TOC --><a name="animation-api"></a>
<h2 id="animation-api" class="tsd-anchor-link">Animation API<a href="#animation-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Let's start with an example:</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">findFirst</span><span class="hl-1">, </span><span class="hl-4">Animation</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ginden/blinkstick-v2&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">// `animationApi` is **your own** module with helper functions;</span><br/><span class="hl-5">// it is shown here only to illustrate that animations are just plain objects.</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">animationApi</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./animation-api&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">blinkstick</span><span class="hl-1"> = </span><span class="hl-0">findFirst</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">animation</span><span class="hl-1"> = </span><span class="hl-4">Animation</span><span class="hl-1">.</span><span class="hl-0">repeat</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">Animation</span><span class="hl-1">.</span><span class="hl-0">morphMany</span><span class="hl-1">([</span><span class="hl-2">&#39;blue&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;purple&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;red&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;yellow&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;green&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;cyan&#39;</span><span class="hl-1">], </span><span class="hl-8">5000</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-8">12</span><span class="hl-1">,</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">// Fire-and-forget ‚Äì the call resolves immediately, the animation continues in the background</span><br/><span class="hl-4">blinkstick</span><span class="hl-1">.</span><span class="hl-4">animation</span><span class="hl-1">.</span><span class="hl-0">runAndForget</span><span class="hl-1">(</span><span class="hl-4">animation</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Or, let&#39;s consider using AnimationBuilder</span><br/><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">AnimationBuilder</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ginden/blinkstick-v2&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">complexAnimation</span><span class="hl-1"> = </span><span class="hl-4">AnimationBuilder</span><span class="hl-1">.</span><span class="hl-0">startWithBlack</span><span class="hl-1">(</span><span class="hl-8">50</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-5">// Add black-red-black pulse over 1 second</span><br/><span class="hl-1">  .</span><span class="hl-0">addPulse</span><span class="hl-1">(</span><span class="hl-2">&#39;red&#39;</span><span class="hl-1">, </span><span class="hl-8">1000</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-5">// Appends new animation to the end of the current one</span><br/><span class="hl-1">  .</span><span class="hl-0">append</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">AnimationBuilder</span><br/><span class="hl-1">      </span><span class="hl-5">// Starts with white color</span><br/><span class="hl-1">      .</span><span class="hl-0">startWithColor</span><span class="hl-1">(</span><span class="hl-2">&#39;white&#39;</span><span class="hl-1">, </span><span class="hl-8">1000</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-5">// Pulses to green over 500ms</span><br/><span class="hl-1">      .</span><span class="hl-0">addPulse</span><span class="hl-1">(</span><span class="hl-2">&#39;green&#39;</span><span class="hl-1">, </span><span class="hl-8">500</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-5">// Pulses to yellow over 500ms</span><br/><span class="hl-1">      .</span><span class="hl-0">addPulse</span><span class="hl-1">([</span><span class="hl-8">255</span><span class="hl-1">, </span><span class="hl-8">255</span><span class="hl-1">, </span><span class="hl-8">0</span><span class="hl-1">], </span><span class="hl-8">500</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-5">// Morphs to red over 500ms</span><br/><span class="hl-1">      .</span><span class="hl-0">morph</span><span class="hl-1">(</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">r:</span><span class="hl-1"> </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">g:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">b:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-8">500</span><span class="hl-1">,</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">      </span><span class="hl-5">// Waits with result of previous steps for 1 second</span><br/><span class="hl-1">      .</span><span class="hl-0">wait</span><span class="hl-1">(</span><span class="hl-8">1000</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-0">build</span><span class="hl-1">(),</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  </span><span class="hl-5">// Repeats the whole animation 3 times</span><br/><span class="hl-1">  .</span><span class="hl-0">repeat</span><span class="hl-1">(</span><span class="hl-8">3</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-5">// Wait with last frame for 1 second</span><br/><span class="hl-1">  .</span><span class="hl-0">wait</span><span class="hl-1">(</span><span class="hl-8">1000</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-5">// Morphs to purple over 1 second</span><br/><span class="hl-1">  .</span><span class="hl-0">morphToColor</span><span class="hl-1">(</span><span class="hl-2">&#39;purple&#39;</span><span class="hl-1">, </span><span class="hl-8">1000</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-5">// This is really advanced feature that allows you to transform each frame</span><br/><span class="hl-1">  .</span><span class="hl-0">transformEachFrame</span><span class="hl-1">((</span><span class="hl-4">frame</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">frame</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">build</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p><code>Animation</code> bag class is a simple convenience wrapper for several common animations and generates <code>FrameIterable</code> objects.</p>
<p><code>AnimationBuilder</code> is a more advanced class that allows you to build complex animations.</p>
<p>What is <code>FrameIterable</code>?</p>
<pre><code class="ts"><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-9">FrameIterable</span><span class="hl-1"> = </span><span class="hl-9">Iterable</span><span class="hl-1">&lt;</span><span class="hl-9">Frame</span><span class="hl-1">&gt; | </span><span class="hl-9">AsyncIterable</span><span class="hl-1">&lt;</span><span class="hl-9">Frame</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p><code>SimpleFrame</code> is a class of <code>{rgb: RgbTuple, duration: number}</code>. It's used by animation runner to change color of all LEDs at once.</p>
<p><code>ComplexFrame</code> is a class of <code>{leds: RgbTuple[], duration: number}</code>. It's used by animation runner to change color of each LED separately. Number of LEDs must match the number of LEDs in the device.</p>
<p><code>WaitFrame</code> is a class of <code>{duration: number}</code>. It's used by animation runner to wait for a given duration.</p>
<!-- TOC --><a name="generators"></a>
<h3 id="generators" class="tsd-anchor-link">Generators<a href="#generators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Most of Animation APIs will throw if you pass a generator. This is there to prevent you from shooting yourself in the foot.</p>
<p>Why?</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">SimpleFrame</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ginden/blinkstick-v2&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">function*</span><span class="hl-1"> </span><span class="hl-0">gen</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-3">yield</span><span class="hl-1"> </span><span class="hl-4">SimpleFrame</span><span class="hl-1">.</span><span class="hl-0">colorAndDuration</span><span class="hl-1">(</span><span class="hl-2">&#39;white&#39;</span><span class="hl-1">, </span><span class="hl-8">500</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">yield</span><span class="hl-1"> </span><span class="hl-4">SimpleFrame</span><span class="hl-1">.</span><span class="hl-0">colorAndDuration</span><span class="hl-1">(</span><span class="hl-2">&#39;red&#39;</span><span class="hl-1">, </span><span class="hl-8">500</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">repeat</span><span class="hl-1">(</span><span class="hl-0">gen</span><span class="hl-1">(), </span><span class="hl-8">3</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// This would yield only 2 frames - generator doesn&#39;t implicitly &quot;fork&quot; when iterated multiple times</span>
</code><button type="button">Copy</button></pre>

<!-- TOC --><a name="limitations"></a>
<h3 id="limitations" class="tsd-anchor-link">Limitations<a href="#limitations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All built-in methods will throw if you try to generate animation with FPS higher than 100. As <code>BlinkStick Nano</code> is de facto limited to 75 FPS, it should be enough.</p>
<p>Your custom animation may be &quot;faster&quot; than that, but expect drift and other issues.</p>
<!-- TOC --><a name="known-issues-1"></a>
<h3 id="known-issues-1" class="tsd-anchor-link">Known issues<a href="#known-issues-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Dreaded <code>could not get feature report from device</code> - this error occurs somewhere in the <code>node-hid</code> library and its dependencies,
and is most likely to occur when calling methods in tight loops. See <a href="https://github.com/node-hid/node-hid/issues/561">https://github.com/node-hid/node-hid/issues/561</a></li>
</ul>
<!-- TOC --><a name="missing-information-help-wanted-"></a>
<h2 id="missing-information--help-wanted-üïµÔ∏è‚ôÄÔ∏è" class="tsd-anchor-link">Missing information / help wanted üïµÔ∏è‚Äç‚ôÄÔ∏è<a href="#missing-information--help-wanted-üïµÔ∏è‚ôÄÔ∏è" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The project is already usable in production, however some pieces of documentation are still scarce. Feel free to open a PR if you can help with any of the items below:</p>
<ol>
<li><strong>Device matrix</strong> ‚Äì a table that documents which features work on every BlinkStick model (Nano, Strip, Flex, Pro‚Ä¶).</li>
<li><strong>LED channel / mode reference</strong> ‚Äì hands-on explanation of the low-level <code>setMode</code>, <code>setChannel</code> helpers and how they relate to the hardware.</li>
<li><strong>Standalone CLI</strong></li>
<li><strong>Animation cookbook</strong> ‚Äì ready-to-copy recipes such as breathing, rainbow cycles, theatre chase, progress bars, etc.</li>
<li><strong>Troubleshooting on Windows</strong> ‚Äì the <code>udev</code> paragraph covers Linux, but Windows quirks and Zadig drivers need love too.</li>
</ol>
<p>Your contributions are highly appreciated! üôè</p>
<!-- TOC --><a name="permission-problems"></a>
<h2 id="permission-problems" class="tsd-anchor-link">Permission problems<a href="#permission-problems" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you get an error message on Linux:</p>
<pre><code>Error: cannot open device with path /dev/hidraw0
</code></pre>
<p>Please run the following command:</p>
<pre><code>echo &quot;KERNEL==\&quot;hidraw*\&quot;, SUBSYSTEM==\&quot;hidraw\&quot;, ATTRS{idVendor}==\&quot;20a0\&quot;, ATTRS{idProduct}==\&quot;41e5\&quot;, MODE=\&quot;0666\&quot;&quot; | sudo tee /etc/udev/rules.d/85-blinkstick-hid.rules
</code></pre>
<p>Then either restart the computer or run the following command to reload udev rules:</p>
<pre><code>sudo udevadm control --reload-rules &amp;&amp; sudo udevadm trigger
</code></pre>
<!-- TOC --><a name="contributing"></a>
<h2 id="contributing" class="tsd-anchor-link">Contributing<a href="#contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Open pull requests, you are welcome.</p>
<!-- TOC --><a name="testing"></a>
<h2 id="testing" class="tsd-anchor-link">Testing<a href="#testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To run tests, you need to have Blinkstick device connected to your computer. This makes it impossible to run tests on
CI, and even typical automated testing is rather challenging.</p>
<!-- TOC --><a name="manual-test"></a>
<h3 id="manual-test" class="tsd-anchor-link">Manual test<a href="#manual-test" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Run <code>npm run test:manual</code> and follow the instructions. You should physically see the device changing colors, and you
will answer yes/no to the questions.</p>
<!-- TOC --><a name="automated-tests"></a>
<h3 id="automated-tests" class="tsd-anchor-link">Automated tests<a href="#automated-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>As most interesting parts of the library require a Blinkstick device and human eye to operate (both unavailable in GitHub Actions), we have rather limited automated tests, testing mostly utility functions and frame generation.</p>
<p>Just run <code>npm test</code> and it will run the tests.</p>
<!-- TOC --><a name="coverage"></a>
<h3 id="coverage" class="tsd-anchor-link">Coverage<a href="#coverage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A proper coverage report would run both manual and automated tests. Feel free to open a PR if you have an idea how to do it.</p>
<!-- TOC --><a name="maintainer"></a>
<h2 id="maintainer" class="tsd-anchor-link">Maintainer<a href="#maintainer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Micha≈Ç Wadas - <a href="https://github.com/Ginden">https://github.com/Ginden</a></li>
</ul>
<!-- TOC --><a name="original-maintainers"></a>
<h3 id="original-maintainers" class="tsd-anchor-link">Original maintainers<a href="#original-maintainers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Arvydas Juskevicius - <a href="http://twitter.com/arvydev">http://twitter.com/arvydev</a></li>
<li>Paul Cuthbertson - <a href="http://twitter.com/paulcuth">http://twitter.com/paulcuth</a></li>
</ul>
<!-- TOC --><a name="copyright-and-license"></a>
<h2 id="copyright-and-license" class="tsd-anchor-link">Copyright and License<a href="#copyright-and-license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Copyright (c) 2014 Agile Innovative Ltd and contributors
Copyright (c) 2025 Micha≈Ç Wadas</p>
<p>Released under MIT license.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#blinkstick-v2--modern-typescript-sdk-for-blinkstick-leds"><span>Blink<wbr/>Stick v2 ‚Äì modern <wbr/>Type<wbr/>Script SDK for <wbr/>Blink<wbr/>Stick LEDs</span></a><ul><li><a href="#why-choose-this-fork"><span>Why choose this fork?</span></a></li><li><ul><li><a href="#quick-install"><span>Quick install</span></a></li><li><a href="#quick-example"><span>Quick example</span></a></li></ul></li><li><a href="#about-this-project"><span>About this project</span></a></li><li><a href="#changes-from-the-original-library-in-v2"><span>Changes from the original library in v2</span></a></li><li><a href="#big-changes-in-v3"><span>Big changes in v3</span></a></li><li><ul><li><a href="#known-issues"><span>Known issues</span></a></li></ul></li><li><a href="#devices"><span>Devices</span></a></li><li><a href="#requirements"><span>Requirements</span></a></li><li><a href="#install-blinkstick-node-module"><span>Install <wbr/>Blink<wbr/>Stick node module</span></a></li><li><a href="#getting-started"><span>Getting started</span></a></li><li><ul><li><a href="#async-recommended"><span>Async (recommended)</span></a></li><li><ul><li><a href="#easy-mistakes"><span>Easy mistakes</span></a></li></ul></li><li><a href="#sync-api"><span>Sync API</span></a></li><li><ul><li><a href="#usage-examples"><span>Usage examples</span></a></li></ul></li></ul></li><li><a href="#animation-api"><span>Animation API</span></a></li><li><ul><li><a href="#generators"><span>Generators</span></a></li><li><a href="#limitations"><span>Limitations</span></a></li><li><a href="#known-issues-1"><span>Known issues</span></a></li></ul></li><li><a href="#missing-information--help-wanted-üïµÔ∏è‚ôÄÔ∏è"><span>Missing information / help wanted üïµÔ∏è‚Äç‚ôÄÔ∏è</span></a></li><li><a href="#permission-problems"><span>Permission problems</span></a></li><li><a href="#contributing"><span>Contributing</span></a></li><li><a href="#testing"><span>Testing</span></a></li><li><ul><li><a href="#manual-test"><span>Manual test</span></a></li><li><a href="#automated-tests"><span>Automated tests</span></a></li><li><a href="#coverage"><span>Coverage</span></a></li></ul></li><li><a href="#maintainer"><span>Maintainer</span></a></li><li><ul><li><a href="#original-maintainers"><span>Original maintainers</span></a></li></ul></li><li><a href="#copyright-and-license"><span>Copyright and <wbr/>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@ginden/blinkstick-v2</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
